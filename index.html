<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Gift Tracker ðŸŽ„</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Mountains+of+Christmas:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Festive Background Elements -->
    <div class="snow-container"></div>
    <div class="sleigh-container">ðŸ›·ðŸŽ…</div>
    <ul class="christmas-lights" aria-hidden="true">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>

    <header class="site-header">
        <h1><i class="fas fa-sleigh"></i> Christmas Gift Tracker</h1>
        <div class="header-controls">
            <button id="sync-btn" class="icon-btn" aria-label="Sync from Cloud" title="Refresh from Cloud"><i
                    class="fas fa-sync-alt"></i></button>
            <button id="toggle-view" class="icon-btn" aria-label="Toggle Table View" title="Compare as Table"><i
                    class="fas fa-table"></i></button>
            <button id="toggle-music" class="icon-btn" aria-label="Toggle Music"><i class="fas fa-music"></i></button>
            <button id="toggle-snow" class="icon-btn" aria-label="Toggle Snow"><i class="fas fa-snowflake"></i></button>
            <button id="add-child-btn" class="primary-btn"><i class="fas fa-user-plus"></i> Add Child</button>
        </div>

        <!-- Christmas Background Music -->
        <audio id="christmas-music" loop preload="auto">
            <source src="media/Idina_Menzel_feat._Michael_Buble_-_Baby_It_s_Cold_Outside_(mp3.pm).mp3"
                type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </header>

    <main class="dashboard">
        <div id="dashboard-summary" class="summary-container hidden">
            <!-- Summary stats injected by JS -->
        </div>

        <div id="children-grid" class="grid-container">
            <!-- Children cards will be rendered here -->
            <div class="empty-state">
                <i class="fas fa-gift fa-3x"></i>
                <p>No children added yet. Start by adding one!</p>
            </div>
        </div>

        <!-- Comparison Table View (hidden by default) -->
        <div id="comparison-table" class="comparison-table-container hidden">
            <!-- Table will be rendered by JS -->
        </div>
    </main>

    <!-- Modal for adding a child -->
    <div id="child-modal" class="modal hidden">
        <div class="modal-content card">
            <h2>Add New Child</h2>
            <form id="child-form">
                <div class="form-group">
                    <label for="child-name">Name</label>
                    <input type="text" id="child-name" required placeholder="e.g. Timmy">
                </div>

                <div class="modal-actions">
                    <button type="button" class="cancel-btn close-modal">Cancel</button>
                    <button type="submit" class="primary-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for adding a gift -->
    <div id="gift-modal" class="modal hidden">
        <div class="modal-content card">
            <h2>Add Gift</h2>
            <form id="gift-form">
                <input type="hidden" id="gift-child-id">
                <div class="form-group">
                    <label for="gift-name">Gift Name</label>
                    <input type="text" id="gift-name" required placeholder="e.g. Toy Train">
                </div>
                <div class="form-group">
                    <label for="gift-price">Price ($)</label>
                    <input type="number" id="gift-price" required min="0" step="0.01">
                </div>
                <div class="modal-actions">
                    <button type="button" class="cancel-btn close-modal">Cancel</button>
                    <button type="submit" class="primary-btn">Add Gift</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyD1gqYAHNB9GwMOapHDvWFNQdV-xEQ7RAY",
            authDomain: "xmas-5d97a.firebaseapp.com",
            projectId: "xmas-5d97a",
            storageBucket: "xmas-5d97a.firebasestorage.app",
            messagingSenderId: "558578141462",
            appId: "1:558578141462:web:0dac2954bcfacae3f7a837"
        };

        const app = initializeApp(firebaseConfig);
        window.db = getFirestore(app);
        window.fbUtils = { collection, doc, setDoc, deleteDoc, onSnapshot };
        window.dispatchEvent(new Event('firebase-ready'));
    </script>
    <script src="js/app.js"></script>
</body>

</html>